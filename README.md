# Extremal Yahtzee — Покер на костях (Web)

Мини‑веб‑приложение для игры в «покер на костях»: создание комнаты, присоединение, поочередные ходы, до двух перебросов и подсчёт очков по покерным комбинациям. Сервер — Flask, фронтенд — HTML/CSS + минимальный JS.

## Возможности
- Комнаты: создание игры, присоединение по ID (2–4 игрока)
- Лобби: отметка готовности; старт при 2+ игроках и готовности всех
- Ход: автоматический бросок 5 костей, до 2 перебросов выбранных индексов (0..4)
- Подсчёт очков: покерные комбинации (пять/четыре/три одинаковых, фулл‑хаус, две пары, пара, стрит 1–5/2–6, старшая кость)
- Раунды: круговой порядок ходов; по достижении `max_rounds` — завершение и определение победителя
- История ходов на сервере (in‑memory)

## Технологии
- Backend: Python 3.11, Flask
- Frontend: Jinja2 шаблоны, Vanilla JS, CSS
- Тесты: pytest (юнит и интеграционные)
- CI: GitHub Actions (pytest + ruff/pylint отчётность)

## Как запустить локально
1) Подготовка окружения
	- Python 3.11+
	- Установка зависимостей:
	  ```bash
	  pip install -r requirements.txt
	  ```
2) Запуск сервера
	```bash
	python -m src.app
	# Открыть http://localhost:5000
	```

WSL примечание: путь к репозиторию будет /mnt/c/..., команды аналогичны.

## Как прогнать тесты
```bash
pytest -q
```

Если импорт `src` не находится, временно добавьте PYTHONPATH:
```bash
export PYTHONPATH="$PWD:$PYTHONPATH"
pytest -q
```

## Структура проекта (ключевое)
- `src/core/game_logic.py` — ядро игры: модели, ходы, комбинации, подсчёт, состояние
- `src/app.py` — Flask‑сервис и эндпоинты
- `src/templates/*.html`, `src/static/*` — простая веб‑оболочка
- `tests/*.py` — юнит/интеграционные тесты
- `docs/*` — документация

## Документация
- API: `docs/API documentation.md`
- Требования (актуальные): `docs/REQUIREMENTS.md`
- Структуры данных: `docs/DATA_STRUCTURES.md`
- Клиентская логика (JS): `docs/POKER_DICE_DOC.md`

## CI
GitHub Actions запускает:
- Установку зависимостей (requirements.txt)
- Ruff/Pylint (пока в режиме отчётности)
- Pytest

## Дорожная карта (next steps)
- Сокеты (Socket.IO) вместо периодического опроса
- Серверное хранение «удержаний» костей и расширенная валидация входов
- Персистентность состояния и минимальные health‑эндпоинты
- Конфиги линтеров и «строгий» режим в CI
